We develop a continuous-time Discrete Choice Dynamic Programming (DCDP) model that formulates a fracking firm's drilling decision on a particular well site as an optimal stopping problem. Under this new theoretical framework, without specifying any capacity constraint, we can rationalize the simultaneous drilling of horizontal wells with heterogeneous resource quality.   
Moreover, our DCDP model yields predictions, being testable by utilizing available well-level data on drilling and extraction in North Dakota, about how fracking firms' drilling and production activities vary with oil prices. 

In this section, we begin by presenting the basic elements and assumptions of our DCDP framework. Following \cite{Hotelling-under-Pressure_AKS_2018}, we assume a continuum of infinitesimally small well sites in which horizontal wells will be drilled. 

The state of a given well site at the beginning of time $t$ is represented by using a well-site-level state variable $s_{t}$ as follows:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_State-Variable.tex}

For a given well site that has not been developed, the firm makes a choice at time $t$ between two alternatives $a_{t} \in \{ 0, 1 \}$, which is a well-site-level control variable:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Control-Variable.tex}
Intuitively, the two alternatives are constrained. To be specific, the constraint depends on the value of $s_{t}$:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Constraints-of-Control-Variable.tex}

The oil production from a horizontal well drilled at time $t$ is assumed to occur only during the very period:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Oil-Production.tex}
where $\alpha$ is the amount of oil produced from a well. For simplicity, it is also assumed that $\alpha$ is a constant across well locations.

The marginal drilling-associated costs at time $t$ are assumed to be uniform across well sites.\footnote{As in Section \ref{C3-SubSection:A-Limitation-of-AKS-style-Model}, we take the assumption of the negligible extraction costs.} We also assume linear marginal costs of drilling a horizontal well. That is, 
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Cost.tex}

The oil price at time $t$, denoted $p_{t}$, is another state variable in our model. Regarding oil prices, two different scenarios are possible in our model. If the oil production industry is small relative to the world oil market, then $p_{t}$ is the world price $\bar{p}$. In other words, $p_{t}$ is exogenous. In the endogenous-price scenario, the market clearing $p_{t}$ is determined from a linear inverse demand curve:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Oil-Prices.tex}
where $Q_{t}$ is aggregate oil production, which will be described in detail later. 

Let $R_{t}$ denote the remaining level of well sites at time $t$. Suppose its initial level is normalized to 1 (i.e., $R_{0} = 1$).

For a given well location that has not been drilled before time $t$, the probability of drilling the well at time $t$ conditional on $s_{t}$ and $p_{t}$ can be defined as follows:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Definition-of-CCP.tex}

Intuitively, aggregate drilling at time $t$ can be expressed with $R_{t}$ and $Pr_{t}$ as follows:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Aggregate-Drilling.tex}
From this definition, the evolution path of the remaining well sites is governed by the following relationship:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Reserve.tex}
In addition, due to the assumption that $\alpha$ is uniform across well sites, the aggregate oil production $Q_{t}$ is proportional to $D_{t}$:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Aggregate-Oil-Production.tex}

The utility obtained from an individual well site can be represented by exploiting an additively separable utility function:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Utility-Function.tex}
Here, we assume that drilling a well and oil production from the well co-occur at time $t$. 

In the utility function, $\epsilon(a_{t})$, a component of the utility of an alternative $a$ at time $t$, is an idiosyncratic cost shock at time $t$.\footnote{We can regard $\epsilon(a_{t})$ as an element of the unobservable state vector $\epsilon_{t}$. In our case, $\epsilon_{t} = ( \epsilon_{0, t}, \ \epsilon_{1, t} )$.} In our context, $\epsilon(a_{t})$, which relies on the firm's choice, can be perceived as a composite cost element that affects the firm's decision at time $t$ between drilling today and drilling in the future and that varies over time. For example, $\epsilon(a_{t})$ could include capacity-constraint-induced costs, whose value varies with $a_{t}$. With the interpretation of $\epsilon(a_{t})$, it is not required to specifically model a set of constraints at time $t$ in our framework. 

Definitely, $\epsilon(a_{t})$ drives the firm's drilling decision at time $t$. Because the choice-specific cost shock is observable only by the firm, without $\epsilon(a_{t})$, the (observable) state variables cannot perfectly explain the firm's drilling decision at time $t$ in our model. Intuitively, when the firm decides whether to drill a well into a given well site or not at time $t$, $a_{t} = 0$ will be the optimal choice if the expected value of the utility function conditional on $a_{t} = 0$ is greater than or equal to that conditional on $a_{t} = 1$. Mathematically, 
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Decision-Rule.tex}
where $e(a_{t})$ is the expected value of $\epsilon(a_{t})$ conditional on the chosen alternative $a_{t}$ (i.e., $E \left[ \epsilon(a_{t}) \ | \ a_{t} \right]$). The decision rule implies that the magnitude of $e(0) - e(1)$ determines the optimal choice. If $\epsilon(a_{t})$ follow the Type 1 Extreme Value (T1EV) distribution with the location parameter 0 and the scale parameter $\sigma$ and are I.I.D., then $e(a_{t})$ is given as follows\footnote{See \cite{Euler-Equations-for-the-Estimation-of-Dynamic-Discrete-Choice-Structural-Models_Aguirregabiria-and-Magesan_2013}.}:
\input{04_Chapter-3/00C_Equations/Equation_DCDP-Model_Expected-Value-of-Epsilon.tex}
Here, $\gamma$ and $CCP(a_{t})$ are Euler's constant and the probability of choosing $a_{t}$ conditional on states at time $t$, respectively. For example, when $a_{t} = 1$, the cost shock's expected value is $\sigma \left( \gamma \ - \ \ln (Pr_{t}) \right)$. 
